## 问题分析

通过检查代码，我发现了几个可能导致视频帧不显示的问题：

1. **缩进问题**：在 `annotate` 函数中，视频帧的分页和添加到 `frames` 列表的逻辑，以及计算总页数的逻辑，都在 `else` 分支的外面，导致逻辑错误

2. **路径问题**：需要确保视频文件路径和帧保存路径是正确的

3. **OpenCV 读取问题**：需要添加错误处理，确保视频文件能够正确打开

4. **帧目录创建问题**：需要确保帧目录能够正确创建，并且有写入权限

5. **前端模板问题**：需要确保前端模板能够正确显示视频帧列表

## 修复方案

1. **修复缩进问题**：
   - 将视频帧的分页和添加到 `frames` 列表的逻辑，以及计算总页数的逻辑，移动到 `if data_file.file_type == 'video':` 分支内部

2. **添加错误处理**：
   - 在 `extract_video_frames` 函数中添加错误处理，确保视频文件能够正确打开
   - 添加日志记录，方便调试

3. **优化路径处理**：
   - 确保使用绝对路径或正确的相对路径
   - 检查文件和目录的权限

4. **改进前端显示**：
   - 添加视频帧提取进度提示
   - 优化错误提示，方便用户了解问题

5. **测试和验证**：
   - 测试视频帧提取功能
   - 验证前端显示是否正常
   - 确保标注功能能够正常工作

## 具体修改

1. **修改 `routes.py` 中的 `annotate` 函数**：
   - 修复缩进问题
   - 添加错误处理
   - 优化路径处理

2. **修改 `routes.py` 中的 `extract_video_frames` 函数**：
   - 添加错误处理
   - 添加日志记录

3. **修改 `templates/annotate.html` 模板**：
   - 添加视频帧提取进度提示
   - 优化错误提示

通过这些修改，确保视频帧能够正确提取和显示，解决用户反映的问题。